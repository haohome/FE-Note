<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
</head>
<body>
    <div style="width:100px; height:3000px"></div>
        <div id="div1" style="width:50px; height:50px; background:red; position:absolute; top:1000px">
    </div>
</body>
<script type="text/javascript">
    // 返回浏览器的可视区域位置
    function getClient(){
        var l, t, w, h;
        l = document.documentElement.scrollLeft || document.body.scrollLeft;
        t = document.documentElement.scrollTop || document.body.scrollTop;
        w = document.documentElement.clientWidth;
        h = document.documentElement.clientHeight;
        return { left: l, top: t, width: w, height: h };
    }

    // 返回待加载资源位置
    function getSubClient(p){
        var l = 0, t = 0, w, h;
        w = p.offsetWidth;
        h = p.offsetHeight;
        while(p.offsetParent){
            l += p.offsetLeft;
            t += p.offsetTop;
            p = p.offsetParent;
        }
        return { left: l, top: t, width: w, height: h };
    }

    // 其中 函数getClient()返回浏览器客户区区域信息，getSubClient()返回目标模块区域信息。
    // 此时确定目标模块是否出现在客户区实际上是确定如上两个矩形是否相交。

    // 判断两个矩形是否相交,返回一个布尔值
    function intens(rec1, rec2){
        var lc1, lc2, tc1, tc2, w1, h1;
        lc1 = rec1.left + rec1.width / 2;
        lc2 = rec2.left + rec2.width / 2;
        tc1 = rec1.top + rec1.height / 2 ;
        tc2 = rec2.top + rec2.height / 2 ;
        w1 = (rec1.width + rec2.width) / 2 ;
        h1 = (rec1.height + rec2.height) / 2;
        // 判断 矩形盒子 是否相交，就是判断两盒子中心线距离 是不是 小于 两盒子的高和的一半
        return Math.abs(lc1 - lc2) < w1 && Math.abs(tc1 - tc2) < h1 ;
    }

    // 我们在window.onscroll事件中编写一些代码监控目标区域是否呈现在客户区。
    var div1 = document.getElementById("div1");

    window.onscroll = function(){
        var prec1 = getClient();
        var prec2 = getSubClient(div1);
        if (intens(prec1, prec2)) {
            alert("红框框在用户区啦！该加载了大兄弟！");
        }
    };

    // 我们只需要在弹出窗口的地方加载我们需要的资源。
    // 目标对象呈现在客户区域时，会随着滚动而不断的弹出窗口。

</script>
</html>